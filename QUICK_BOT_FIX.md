# üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –±–æ—Ç–æ–º

## üö® –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ü—Ä–æ—Ñ–∏–ª—å**: –ë–æ—Ç –Ω–µ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –∏–∑ –ë–î, –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π
- **–ü–ª–∞—Ç–µ–∂–∏**: –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö –æ–ø–ª–∞—Ç—ã, —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω YooKassa

## ‚úÖ –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@5.129.198.80
cd /opt/dieta
source venv/bin/activate
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
```bash
# –ü—É–ª –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git pull origin main

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
ls -la components/payment_system/
ls -la components/handlers/user_handlers.py
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ YooKassa
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env —Ñ–∞–π–ª
nano .env
```

**–î–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫–∏:**
```env
# ===== YOOKASSA –ù–ê–°–¢–†–û–ô–ö–ò =====
YOOKASSA_SHOP_ID=390540012
YOOKASSA_SECRET_KEY=live_4nHajHuzYGMrBPFLXQojoRW1_6ay2jy7SqSBUl16JOA
YOOKASSA_PAYMENT_TOKEN=390540012:LIVE:73839
```

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Redis
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º Redis
sudo snap services redis

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å–∫–∞–µ–º
sudo snap start redis

# –ï—Å–ª–∏ snap –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º Docker
sudo docker run -d --name redis -p 6379:6379 redis:alpine
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞
sudo systemctl stop bot

# –£–±–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python
sudo pkill -f "python.*main"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep "python.*main"

# –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
sudo systemctl start bot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status bot
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –±–æ—Ç–∞
sudo journalctl -u bot -f

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º –¥–µ—Ç–∞–ª–∏
sudo journalctl -u bot --tail=50
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç –ø—Ä–æ—Ñ–∏–ª—è
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/profile` 
3. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è

### –¢–µ—Å—Ç –ø–ª–∞—Ç–µ–∂–µ–π
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/diet_consultant`
2. –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–¥–ø–∏—Å–∫–µ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –æ–ø–ª–∞—Ç—ã
4. –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø–ª–∞—Ç–µ–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–ü—Ä–æ—Ñ–∏–ª—å**: –ë–æ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
- ‚úÖ **–ü–ª–∞—Ç–µ–∂–∏**: –ü–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º YooKassa
- ‚úÖ **Redis**: –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ snap –∏–ª–∏ Docker
- ‚úÖ **–ë–æ—Ç**: –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å, –±–µ–∑ –æ—à–∏–±–æ–∫

## üö® –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è

### –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ
sudo systemctl stop bot
sudo pkill -f python
sudo pkill -f redis

# –ü–æ–¥–æ–∂–¥–∞—Ç—å
sleep 5

# –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–Ω–æ–≤–æ
sudo snap start redis
sudo systemctl start bot
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
grep YOOKASSA .env

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ Redis —Ä–∞–±–æ—Ç–∞–µ—Ç
redis-cli ping

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep -E "(python|redis)"
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
python quick_fix_bot_issues.py
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo journalctl -u bot -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `sudo systemctl status bot redis`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã: `netstat -tlnp | grep -E "(6379|8000)"`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω (`git pull`)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ YooKassa –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ `.env`
- [ ] Redis —Ä–∞–±–æ—Ç–∞–µ—Ç (`redis-cli ping`)
- [ ] –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω (`sudo systemctl restart bot`)
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö (`sudo journalctl -u bot -f`)
- [ ] –ü—Ä–æ—Ñ–∏–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç (`/profile`)
- [ ] –ü–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (`/diet_consultant`) 