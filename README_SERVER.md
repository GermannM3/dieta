# üöÄ Dieta Bot - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
cd /opt
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π> dieta
cd dieta
python3 -m venv venv
source venv/bin/activate
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
```bash
chmod +x fix_dependencies.sh
./fix_dependencies.sh
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
cp .env.example .env
nano .env  # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 4. –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
python quick_server_fix.py
```

### 5. –ó–∞–ø—É—Å–∫
```bash
chmod +x deploy_server.sh
./deploy_server.sh
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ü—Ä–æ–±–ª–µ–º–∞:** `aiogram 3.4.1` —Ç—Ä–µ–±—É–µ—Ç `pydantic<2.6`, –∞ `mistralai>=1.0.0` —Ç—Ä–µ–±—É–µ—Ç `pydantic>=2.10.3`
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ –≤ `requirements.txt`:
  - `aiogram>=3.4,<4`
  - `fastapi>=0.115,<0.120`
  - `mistralai>=1.9,<2`

### ‚úÖ –†—É—Å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –≠–º–æ–¥–∑–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–∫—Ä–∏–ø—Ç `fix_dependencies.sh` –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- –°–∫—Ä–∏–ø—Ç `quick_server_fix.py` –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
dieta/
‚îú‚îÄ‚îÄ main.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ improved_api_server.py     # API —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)
‚îú‚îÄ‚îÄ .env                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ deploy_server.sh          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ fix_dependencies.sh       # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ quick_server_fix.py       # –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ dieta-bot.service         # Systemd —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ SERVER_INSTRUCTIONS.md    # –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ó–∞–ø—É—Å–∫
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./deploy_server.sh

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
python start_all_services.py

# –ß–µ—Ä–µ–∑ systemd
systemctl start dieta-bot.service
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
systemctl status dieta-bot.service

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u dieta-bot.service -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
curl -I http://localhost:3000
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
systemctl stop dieta-bot.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart dieta-bot.service
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
./fix_dependencies.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
python quick_server_fix.py
journalctl -u dieta-bot.service -f
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
lsof -i :8000
lsof -i :3000
kill -9 <PID>
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
htop

# –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
df -h

# –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
netstat -tulpn
```

### –õ–æ–≥–∏
```bash
# –í—Å–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
journalctl -u dieta-bot.service

# –õ–æ–≥–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
journalctl -u dieta-bot.service --since "1 hour ago"

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
journalctl --vacuum-time=7d
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –§–∞–π—Ä–≤–æ–ª
```bash
ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP
ufw allow 443/tcp   # HTTPS
ufw allow 8000/tcp  # API
ufw allow 3000/tcp  # Frontend
ufw enable
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```bash
apt install certbot python3-certbot-nginx
certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.com
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python quick_server_fix.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python test_db_connection.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SMTP
python test_smtp.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π
python test_premium.py
```

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
journalctl -u dieta-bot.service -f

# –õ–æ–≥–∏ nginx
tail -f /var/log/nginx/error.log

# –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
dmesg | tail -20
```

---

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏

1. **‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - —Ä–∞–∑—Ä–µ—à–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É `aiogram`, `fastapi` –∏ `mistralai`
2. **‚úÖ –†—É—Å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞–ª–∏—Å—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
3. **‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
4. **‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. **‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å systemd —Å–µ—Ä–≤–∏—Å–æ–º

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ** 